# 前端开发规范

## 1.HTML规范


### 1.1.使用正确的HTML5文档类型

```HTML
<!doctype html>
<html lang="zh">
<head>
	<meta charset="UTF-8" />
	<title>Document</title>
</head>
<body>
	
</body>
</html>
```

### 1.2.避免不规范的元素嵌套

错误示例:

```HTML
<ul>
	<div>导航栏标题</div>
	<li>子项1</li>
	<li>子项2</li>
<ul>
```

正确示例：

```HTML
<div>导航栏标题</div>
<ul>
	<li>子项1</li>
	<li>子项2</li>
<ul>
```

**`ul`**标签只允许存在**`li`**作为其直接子标签。错误示例中的代码虽然可以正常渲染，但是由于不同浏览器容错机制不一致，错误的示例代码可能会导致额外的hack。

### 1.3.自定义属性采用`data-*`格式

错误示例：

```HTML
<div ng-click="click()">
```

正确示例：

```HTML
<div data-ng-click="click()">
```

`data-*`是HTML5的标准规范，如不采用`data-*`格式，IDE会显示警告信息，避免警告信息影响正常的debug，建议采用`data-*`格式自定义属性。

## 2.CSS规范

## 3.JavaScript规范

### 3.1.字符串统一使用单引号包含

不好的示例：

```JavaScript
var msg = "Hello JavaScript!";
```

正确示例：

```JavaScript
var msg = 'Hello JavaScript!';
```

使用单引号的最主要原因是，避免额外的单引号\双引号转义。

```JavaScript
var dom = “<div data-ng-click=\"click();\">双引号\"\"不建议</div>”;
```

vs

```JavaScript
var dom = '<div data-ng-click="click();">双引号""不建议</div>';
```

两种写法对比，优劣一目了然。

### 3.1.避免使用JavaScript拼接HTML

使用JavaScript拼接HTML，会有以下问题：
* 极容易产生XSS漏洞；
* 关注点不分离，升级维护极其困难；
* 开发效率低下，代码不健壮，非常容易产生bug；
* Debug变的异常艰难；

不好的示例：

```JavaScript
var names = ['tiger','apple', '<script>alert("xss");</script>'];
var dom = '<ul>';
names.forEach(function(name,index){
	dom += '<li>' + name + '</li>';
})
dom += '</ul>';

$('body').html(dom);
```

上面的代码会导致一下问题：
* names[3]插入页面后，`<script>alert("xss");<script>`会被当成脚本执行，容易被用户利用，入侵系统；
* 代码升级维护困难，如果要修改样式，或者渲染的对象更加复杂（多层嵌套），维护这样的代码不仅效率低下，容易出错，简直就是噩梦；
* 产生bug的情况下，调试异常复杂；

正确示例：

AngularJS写法：

```JavaScript
<ul>
	<li data-ng-repeat="name in names">{{ name }}</li>
</ul>
```

如果使用jQuery情况下，可以使用前端模板引擎，例如doT.js、jQuery Template等。


### 3.2 JavaScript语法技巧

使用这些小技巧，可以让代码更加简洁、容易理解。

#### 3.2.1 默认参数赋值

冗长写法：
```JavaScript
function fun(param) {
    if(param == null) {
        param = {name:'tiger'};
    }
}
```
简洁写法：
```JavaScript
function fun(param) {
    param = param || {name:'tiger'};
}
```

#### 3.2.2 判空执行

冗长写法：
```JavaScript
function fun() {
    if(flag) {
        callback();
    }
}
```

简洁写法：

```JavaScript
function fun() {
    flag && callback();
}
```

#### 3.2.3 自调用函数

冗长写法：

```JavaScript
function fun(){
    // code here
}
fun();
```

简洁写法：

```JavaScript
(function(){
    // code here
})();
```

#### 3.2.4 数组迭代

### 3.2.4.1 数组迭代

冗长写法：for

简洁写法：filter、some、every、forEach、map

##### 3.2.4.2 filter:对数组进行过滤，并返回新的数组

```JavaScript
var s = [1,2,3,4,5];
var ns = s.filter(function(item,index) {
	return item > 3;
})
console.log(ns); // [4,5]
```

##### 3.2.4.3  some:判断数组中是否有符合条件的元素

```JavaScript
var s = [1,2,3,4,5];
var b = s.some(function(item,index) {
	return item > 3;
})
console.log(b); // true
```

##### 3.2.4.4  every:判断数组中所有元素是否都符合条件

```JavaScript
var s = [1,2,3,4,5];
var b = s.every(function(item,index) {
	return item > 3;
})
console.log(b); // false
```

##### 3.2.4.5 map:对数组中的元素进行处理，并返回新的数组

```JavaScript
var s = [1,2,3,4,5];
var ns = s.map(function(item,index) {
	return item * 2;
})
console.log(ns); // [2,4,6,8,10]
```

##### 3.2.4.6 forEach:迭代数组元素

```JavaScript
var s = [1,2,3,4,5];
var ns = s.map(function(item,index) {
	console.log(item); // 依次打印1，2，3，4，5
})
```
